# VPTåˆæˆæœºåˆ¶ï¼šMineRL vs MineDojo

**æ—¥æœŸ**: 2025-10-29  
**é—®é¢˜**: VPTåœ¨MineRLä¸­å¦‚ä½•åˆ¶ä½œç‰©å“ï¼ˆå¦‚æœ¨æ–§ï¼‰ï¼Ÿ

---

## ğŸ” è§‚å¯Ÿåˆ°çš„ç°è±¡

åœ¨å®˜æ–¹VPTæ¼”ç¤ºä¸­ï¼ˆMineRLç¯å¢ƒï¼‰ï¼Œagentç æ ‘åï¼š
1. âœ… æ‰“å¼€äº†åˆæˆçª—å£
2. âœ… åˆ¶ä½œäº†æœ¨æ–§
3. âœ… ç»§ç»­æ¸¸æˆ

**é—®é¢˜**: è¿™ä¸ªåŠ¨ä½œåºåˆ—å¦‚ä½•å®ç°ï¼Ÿ

---

## ğŸ“š MineRLçš„åˆæˆæœºåˆ¶

### åŠ¨ä½œç©ºé—´ä¸­çš„ç›¸å…³åŠ¨ä½œ

æ ¹æ®[MineRLæ–‡æ¡£](https://minerl.readthedocs.io/en/v1.0.0/environments/index.html#action-space)ï¼š

```python
{
    "inventory": Discrete(2),  # æ‰“å¼€/å…³é—­ç‰©å“æ GUI
    "camera": Box(low=-180.0, high=180.0, shape=(2,)),  # ç§»åŠ¨å‡†æ˜Ÿ
    "use": Discrete(2),        # ä½¿ç”¨/ç‚¹å‡»
    "attack": Discrete(2),     # æ”»å‡»/ç‚¹å‡»
    ...
}
```

**å…³é”®**: MineRL **æ²¡æœ‰ç›´æ¥çš„"craft"åŠ¨ä½œ**ï¼

### VPTçš„åˆæˆæµç¨‹ï¼ˆGUIæ“ä½œï¼‰

```python
# æ­¥éª¤1: æ‰“å¼€ç‰©å“æ /åˆæˆç•Œé¢
action = {"inventory": 1, ...}
# â†’ è§‚å¯Ÿå˜æˆGUIç•Œé¢ï¼ˆæ˜¾ç¤ºç‰©å“æ ã€åˆæˆæ§½ç­‰ï¼‰

# æ­¥éª¤2: ç§»åŠ¨å‡†æ˜Ÿåˆ°åˆæˆç»“æœä½ç½®
action = {"camera": [pitch, yaw], ...}
# â†’ å‡†æ˜Ÿç§»åŠ¨åˆ°æœ¨æ–§çš„ä½ç½®

# æ­¥éª¤3: ç‚¹å‡»è·å–æœ¨æ–§
action = {"use": 1, ...}  # æˆ– "attack": 1
# â†’ ä»åˆæˆæ§½ä¸­å–å‡ºæœ¨æ–§

# æ­¥éª¤4: å…³é—­ç‰©å“æ 
action = {"inventory": 1, ...}
# â†’ è¿”å›æ­£å¸¸æ¸¸æˆè§†è§’
```

**æœ¬è´¨**: VPTé€šè¿‡**è§†è§‰å¼•å¯¼çš„GUIæ“ä½œ**æ¥åˆæˆç‰©å“ï¼Œç±»ä¼¼äººç±»ç©å®¶ï¼

### è§‚å¯Ÿç©ºé—´çš„å˜åŒ–

```python
# æ­£å¸¸æ¸¸æˆæ—¶
obs["pov"] = [æ¸¸æˆä¸–ç•Œçš„ç¬¬ä¸€äººç§°è§†è§’]

# æ‰“å¼€inventoryå  
obs["pov"] = [ç‰©å“æ GUIç•Œé¢]
            # å¯ä»¥çœ‹åˆ°ï¼š
            # - ç‰©å“æ æ ¼å­
            # - åˆæˆæ§½ï¼ˆ2x2æˆ–3x3ï¼‰
            # - åˆæˆç»“æœä½ç½®
```

VPTçš„è§†è§‰ç½‘ç»œéœ€è¦ï¼š
1. è¯†åˆ«å½“å‰æ˜¯å¦åœ¨GUIç•Œé¢
2. å®šä½ç‰©å“å’Œåˆæˆæ§½ä½ç½®
3. è§„åˆ’é¼ æ ‡ç§»åŠ¨å’Œç‚¹å‡»åºåˆ—

---

## ğŸ® MineDojoçš„åˆæˆæœºåˆ¶

### åŠ¨ä½œç©ºé—´ä¸­çš„craft

æ ¹æ®[MineDojoæ–‡æ¡£](https://docs.minedojo.org/sections/core_api/action_space.html)ï¼š

```python
MultiDiscrete([3, 3, 4, 25, 25, 8, 244, 36])
                                  â†‘    â†‘
                           index 5    index 6
```

| Index | æè¿° | å€¼ |
|-------|------|---|
| 5 | Functional actions | 4 = craft |
| 6 | Craft argument | é…æ–¹ID (0-243) |

### MineDojoçš„åˆæˆæµç¨‹ï¼ˆç›´æ¥æŒ‡ä»¤ï¼‰

```python
# ä¸€æ­¥å®Œæˆï¼
action = [0, 0, 0, 12, 12, 4, wood_axe_id, 0]
         # index 5 = 4 (craft)
         # index 6 = wood_axe_id (å‡è®¾æ˜¯æŸä¸ªID)

# â†’ ç›´æ¥è·å¾—æœ¨æ–§ï¼ˆå‰æï¼šç‰©å“æ æœ‰è¶³å¤Ÿææ–™ï¼‰
```

**æœ¬è´¨**: MineDojoæä¾›**é«˜çº§æŠ½è±¡**ï¼Œä¸€ä¸ªåŠ¨ä½œå®Œæˆåˆæˆï¼

---

## âš–ï¸ ä¸¤ç§æœºåˆ¶å¯¹æ¯”

| æ–¹é¢ | MineRL/VPT | MineDojo |
|------|-----------|----------|
| **åˆæˆæ–¹å¼** | GUIæ“ä½œï¼ˆæ‰“å¼€â†’å®šä½â†’ç‚¹å‡»ï¼‰ | ç›´æ¥æŒ‡ä»¤ï¼ˆä¸€æ­¥å®Œæˆï¼‰ |
| **åŠ¨ä½œæ•°é‡** | å¤šæ­¥ï¼ˆ4-10æ­¥ï¼‰ | å•æ­¥ |
| **éœ€è¦æŠ€èƒ½** | è§†è§‰ç†è§£ + é¼ æ ‡æ§åˆ¶ | çŸ¥é“é…æ–¹ID |
| **éš¾åº¦** | é«˜ï¼ˆæ¥è¿‘äººç±»ç©å®¶ï¼‰ | ä½ï¼ˆç¨‹åºåŒ–ï¼‰ |
| **`inventory`åŠ¨ä½œ** | æ‰“å¼€/å…³é—­GUI | æ— æ­¤åŠ¨ä½œ |
| **`craft`åŠ¨ä½œ** | æ—  | æœ‰ï¼ˆindex 5=4ï¼‰ |
| **é…æ–¹é€‰æ‹©** | è§†è§‰å¼•å¯¼ | å‚æ•°æŒ‡å®šï¼ˆindex 6ï¼‰ |
| **çœŸå®æ€§** | â­â­â­â­â­ï¼ˆå®Œå…¨æ¨¡æ‹Ÿäººç±»ï¼‰ | â­â­â­ï¼ˆç®€åŒ–æŠ½è±¡ï¼‰ |

---

## ğŸ”„ æ˜ å°„é—®é¢˜

### å½“å‰æ˜ å°„çš„å±€é™æ€§

```python
# src/models/vpt/minedojo_agent.py
def convert(self, minerl_action: dict) -> np.ndarray:
    # ...
    if minerl_action.get('attack', 0):
        minedojo_action[5] = 3
    elif minerl_action.get('use', 0):
        minedojo_action[5] = 1
    # ...
    # âŒ inventoryåŠ¨ä½œè¢«å¿½ç•¥ï¼
```

**é—®é¢˜**ï¼š
1. VPTçš„ `inventory=1` è¢«å¿½ç•¥
2. VPTåœ¨GUIä¸­çš„ `use/attack` ç‚¹å‡»è¢«è½¬æ¢ä¸ºMineDojoçš„use/attack
3. **æ— æ³•æ­£ç¡®æ˜ å°„åˆæˆæ“ä½œ**ï¼

### ä¸ºä»€ä¹ˆè¿™æ˜¯å¯æ¥å—çš„ï¼Ÿ

å¯¹äº**harvest_1_log**ç­‰ç®€å•ä»»åŠ¡ï¼š
- âœ… **ä¸éœ€è¦åˆæˆ**ç‰©å“
- âœ… VPTåªéœ€è¦ç§»åŠ¨ã€è§†è§’ã€æ”»å‡»
- âœ… å³ä½¿VPTå°è¯•æ‰“å¼€inventoryï¼ŒMineDojoä¼šå¿½ç•¥ï¼Œä¸å½±å“ä»»åŠ¡å®Œæˆ

å¯¹äº**éœ€è¦åˆæˆ**çš„å¤æ‚ä»»åŠ¡ï¼š
- âŒ ç›´æ¥è¿è¡ŒVPTä¼š**å¤±è´¥**
- âŒ VPTçš„GUIæ“ä½œåœ¨MineDojoä¸­æ— æ³•æ‰§è¡Œ
- ğŸ”§ éœ€è¦**ä»»åŠ¡ç‰¹å®šçš„é€‚é…**æˆ–**fine-tune**

---

## ğŸ’¡ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä»»åŠ¡é™åˆ¶ï¼ˆå½“å‰æ–¹æ¡ˆï¼‰

**é€‚ç”¨åœºæ™¯**: harvest_1_log, æ¢ç´¢ä»»åŠ¡ç­‰ä¸éœ€è¦åˆæˆçš„ä»»åŠ¡

```python
# ç›´æ¥ä½¿ç”¨VPT zero-shot
agent = VPTAgent(weights_path='...', cam_interval=0.01)
# åœ¨harvest_1_logä»»åŠ¡ä¸­æ­£å¸¸å·¥ä½œ
```

**ä¼˜ç‚¹**:
- âœ… æ— éœ€ä¿®æ”¹
- âœ… ç®€å•ä»»åŠ¡è¡¨ç°è‰¯å¥½

**ç¼ºç‚¹**:
- âŒ æ— æ³•å¤„ç†éœ€è¦åˆæˆçš„ä»»åŠ¡

---

### æ–¹æ¡ˆ2: Fine-tuneé€‚é…MineDojo

**é€‚ç”¨åœºæ™¯**: éœ€è¦åˆæˆçš„å¤æ‚ä»»åŠ¡

```python
# 1. ä½¿ç”¨MineDojoç¯å¢ƒfine-tune VPT
#    - MineDojoçš„craftåŠ¨ä½œæ›´ç®€å•
#    - Agentå­¦ä¼šä½¿ç”¨craftè€Œä¸æ˜¯GUIæ“ä½œ

# 2. æˆ–è€…æ”¶é›†MineDojoä¸“å®¶æ•°æ®è®­ç»ƒ
#    - ä½¿ç”¨MineDojoçš„craftæœºåˆ¶
```

**ä¼˜ç‚¹**:
- âœ… å……åˆ†åˆ©ç”¨MineDojoçš„ç®€åŒ–æœºåˆ¶
- âœ… æ›´é«˜æ•ˆçš„åˆæˆ

**ç¼ºç‚¹**:
- âŒ éœ€è¦é‡æ–°è®­ç»ƒ
- âŒ å¤±å»VPTçš„zero-shotèƒ½åŠ›

---

### æ–¹æ¡ˆ3: Hybrid Wrapperï¼ˆé«˜çº§ï¼‰

```python
class VPTMineDojoCraftWrapper:
    """
    æ£€æµ‹VPTçš„GUIæ“ä½œåºåˆ—ï¼Œè½¬æ¢ä¸ºMineDojoçš„craftæŒ‡ä»¤
    """
    def __init__(self, agent):
        self.agent = agent
        self.in_inventory = False
        self.craft_buffer = []
    
    def predict(self, obs):
        action = self.agent.predict(obs)
        
        # æ£€æµ‹æ‰“å¼€inventory
        if minerl_action.get('inventory', 0):
            self.in_inventory = not self.in_inventory
            if self.in_inventory:
                # å¼€å§‹è®°å½•GUIæ“ä½œ
                self.craft_buffer = []
            else:
                # å…³é—­inventoryï¼Œåˆ†æcraftæ„å›¾
                craft_id = self.infer_craft_intent(self.craft_buffer)
                if craft_id:
                    return self.create_craft_action(craft_id)
        
        # åœ¨GUIä¸­è®°å½•æ“ä½œ
        if self.in_inventory:
            self.craft_buffer.append(minerl_action)
            return noop_action  # æš‚æ—¶ä¸æ‰§è¡Œ
        
        return action
    
    def infer_craft_intent(self, buffer):
        """ä»GUIæ“ä½œåºåˆ—æ¨æ–­åˆæˆæ„å›¾"""
        # åˆ†æcameraç§»åŠ¨å’Œclickä½ç½®
        # æ¨æ–­è¦åˆæˆçš„ç‰©å“
        ...
```

**ä¼˜ç‚¹**:
- âœ… ä¿ç•™VPTçš„åŸå§‹èƒ½åŠ›
- âœ… é€‚é…MineDojoçš„craftæœºåˆ¶

**ç¼ºç‚¹**:
- âŒ å®ç°å¤æ‚
- âŒ éœ€è¦GUIä½ç½®æ˜ å°„
- âŒ å¯èƒ½ä¸å¤Ÿå‡†ç¡®

---

## ğŸ“Š å®é™…å½±å“è¯„ä¼°

### å½“å‰VPTåœ¨MineDojoä¸­çš„è¡¨ç°

| ä»»åŠ¡ç±»å‹ | VPTè¡¨ç° | åŸå›  |
|---------|--------|------|
| harvest_1_log | âœ… è‰¯å¥½ | æ— éœ€åˆæˆ |
| æ¢ç´¢ä»»åŠ¡ | âœ… è‰¯å¥½ | æ— éœ€åˆæˆ |
| combatä»»åŠ¡ | âœ… è¾ƒå¥½ | åŸºæœ¬åŠ¨ä½œä¸ºä¸» |
| å»ºé€ ä»»åŠ¡ï¼ˆéœ€è¦å·¥å…·ï¼‰ | âŒ å·® | æ— æ³•åˆæˆå·¥å…· |
| å¤æ‚ä»»åŠ¡ï¼ˆéœ€è¦å¤šæ­¥åˆæˆï¼‰ | âŒ å¤±è´¥ | GUIæ“ä½œæ— æ•ˆ |

### VPTå°è¯•æ‰“å¼€inventoryçš„é¢‘ç‡

æ ¹æ®æµ‹è¯•ï¼ˆ100æ­¥ï¼‰ï¼š
- `inventory=1` å‡ºç°æ¬¡æ•°: **éœ€è¦å®é™…æµ‹è¯•**
- é¢„è®¡ï¼š**è¾ƒä½**ï¼ˆVPTåœ¨early-gameä¸»è¦æ˜¯æ¢ç´¢å’Œæ”¶é›†ï¼‰

---

## âœ… å½“å‰å»ºè®®

### çŸ­æœŸï¼ˆZero-shotè¯„ä¼°ï¼‰

```python
# ä½¿ç”¨VPTè¿›è¡Œzero-shotè¯„ä¼°
# âœ… é€‚ç”¨ä»»åŠ¡: harvest_1_log, exploreç­‰
# âŒ ä¸é€‚ç”¨: éœ€è¦åˆæˆçš„ä»»åŠ¡

agent = VPTAgent(weights_path='...', cam_interval=0.01)
# inventoryåŠ¨ä½œä¼šè¢«å¿½ç•¥ï¼Œä¸å½±å“ç®€å•ä»»åŠ¡
```

**åŠ¨ä½œæ˜ å°„ä¿æŒç°çŠ¶**ï¼š
- âœ… å¿½ç•¥ `inventory`ï¼ˆä¸ä¼šç ´åç®€å•ä»»åŠ¡ï¼‰
- âœ… æ­£ç¡®æ˜ å°„å…¶ä»–åŠ¨ä½œ

### é•¿æœŸï¼ˆFine-tuneè®­ç»ƒï¼‰

```python
# åœ¨MineDojoç¯å¢ƒä¸­fine-tune
# å­¦ä¹ ä½¿ç”¨MineDojoçš„craftæœºåˆ¶
# è€Œä¸æ˜¯MineRLçš„GUIæ“ä½œ

# å¯ä»¥è€ƒè™‘ï¼š
# 1. BCè®­ç»ƒï¼Œä½¿ç”¨MineDojoä¸“å®¶æ•°æ®
# 2. RL fine-tuneï¼Œåˆ©ç”¨MineDojoçš„craftå¥–åŠ±
```

---

## ğŸ¯ ç»“è®º

1. **MineRLçš„`inventory`** = æ‰“å¼€GUIè¿›è¡Œ**è§†è§‰å¼•å¯¼æ“ä½œ**
2. **MineDojoçš„`craft`** = ç›´æ¥æŒ‡ä»¤**ç¨‹åºåŒ–åˆæˆ**
3. **ä¸¤è€…æ— æ³•ç›´æ¥æ˜ å°„**ï¼Œè¯­ä¹‰å®Œå…¨ä¸åŒ
4. **å½“å‰æ–¹æ¡ˆ**é€‚ç”¨äºä¸éœ€è¦åˆæˆçš„ç®€å•ä»»åŠ¡
5. **å¤æ‚ä»»åŠ¡**éœ€è¦fine-tuneæˆ–wrapperæ¥é€‚é…

**å¯¹äºharvest_1_logä»»åŠ¡**: å½“å‰æ˜ å°„å®Œå…¨è¶³å¤Ÿï¼âœ…

---

## ğŸ“š å‚è€ƒ

- [MineRL Action Space](https://minerl.readthedocs.io/en/v1.0.0/environments/index.html#action-space)
- [MineDojo Action Space](https://docs.minedojo.org/sections/core_api/action_space.html)
- VPT Paper: "Video PreTraining (VPT): Learning to Act by Watching Unlabeled Online Videos"

---

**æœ€åæ›´æ–°**: 2025-10-29  
**çŠ¶æ€**: âœ… é—®é¢˜å·²åˆ†æï¼Œå½“å‰æ˜ å°„ç­–ç•¥åˆç†

