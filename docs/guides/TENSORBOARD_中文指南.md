# TensorBoard 中文使用指南

## 界面导航（顶部标签）

| 英文 | 中文 | 说明 |
|------|------|------|
| TIME SERIES | 时间序列 | **最常用**：查看训练曲线 |
| SCALARS | 标量 | 同上（旧版名称）|
| IMAGES | 图像 | 查看训练过程的图像 |
| GRAPHS | 计算图 | 查看模型结构 |
| DISTRIBUTIONS | 分布 | 查看参数分布 |
| HISTOGRAMS | 直方图 | 查看参数直方图 |

## 核心指标翻译

### Rollout 指标（训练表现）

| 英文指标 | 中文 | 说明 |
|---------|------|------|
| `rollout/ep_rew_mean` | 平均回合奖励 | **最重要**：越高越好 |
| `rollout/ep_len_mean` | 平均回合长度 | Episode 平均步数 |
| `time/fps` | 每秒帧数 | 训练速度（越高越快）|
| `time/iterations` | 迭代次数 | PPO 更新次数 |
| `time/time_elapsed` | 已用时间 | 训练总时长（秒）|
| `time/total_timesteps` | 总步数 | 已训练的总步数 |

### Train 指标（训练细节）

| 英文指标 | 中文 | 说明 |
|---------|------|------|
| `train/approx_kl` | 近似KL散度 | 策略变化幅度 |
| `train/clip_fraction` | 裁剪比例 | 被裁剪的样本比例 |
| `train/clip_range` | 裁剪范围 | PPO 裁剪阈值 |
| `train/entropy_loss` | 熵损失 | 策略随机性（探索程度）|
| `train/explained_variance` | 解释方差 | 价值函数拟合质量 |
| `train/learning_rate` | 学习率 | 当前学习率 |
| `train/loss` | 总损失 | 总体损失（越小越好）|
| `train/policy_gradient_loss` | 策略梯度损失 | 策略网络损失 |
| `train/value_loss` | 价值损失 | 价值网络损失 |
| `train/n_updates` | 更新次数 | 梯度更新次数 |

## 界面操作说明

### 左侧面板

| 英文 | 中文 | 功能 |
|------|------|------|
| Filter runs (regex) | 过滤运行 | 搜索特定训练 |
| Filter tags (regex) | 过滤标签 | 搜索特定指标 |
| Run | 运行 | 训练名称 |
| Pinned | 固定 | 固定重要图表 |

### 图表控制

| 图标/按钮 | 中文 | 功能 |
|----------|------|------|
| 📌 (Pin icon) | 固定 | 固定到顶部 |
| 🔍 (Zoom) | 缩放 | 放大查看 |
| ⬇️ (Download) | 下载 | 下载图表数据 |
| ⚙️ Settings | 设置 | 调整显示选项 |
| 🔄 Reload | 刷新 | 手动刷新数据 |

### 设置面板（右侧）

| 英文 | 中文 | 说明 |
|------|------|------|
| Horizontal Axis | 横轴 | 选择横轴类型 |
| - Step | 步数 | 按训练步数显示 |
| - Relative | 相对时间 | 按相对时间显示 |
| - Wall | 绝对时间 | 按真实时间显示 |
| Smoothing | 平滑度 | 曲线平滑程度（0-1）|
| Ignore outliers | 忽略离群值 | 自动隐藏异常点 |
| Tooltip sorting | 提示排序 | 鼠标悬停时的排序 |

## 重要指标解读

### 🎯 训练成功的标志

1. **`rollout/ep_rew_mean` 上升** ✅
   - 说明智能体学会获得更多奖励
   - harvest_milk: 目标是接近 1.0

2. **`train/loss` 下降** ✅
   - 说明模型在改进
   - 但下降到一定程度会稳定

3. **`train/explained_variance` 接近 1** ✅
   - 说明价值函数预测准确
   - 0.8-1.0 是好的

### ⚠️ 需要注意的信号

1. **`rollout/ep_rew_mean` 不变或下降**
   - 可能需要调整学习率
   - 可能需要更多探索

2. **`train/approx_kl` 很大（>0.03）**
   - 策略变化太快
   - 可能不稳定

3. **`train/explained_variance` 很低（<0.5）**
   - 价值函数学习困难
   - 可能需要调整网络结构

## 快速操作指南

### 查看最重要的指标

1. 点击 **TIME SERIES** 标签
2. 在搜索框输入 `ep_rew` 
3. 查看 **平均奖励曲线**

### 对比不同训练

- 左侧勾选多个 Run
- 不同训练会用不同颜色显示

### 放大查看细节

- 鼠标拖动选择区域
- 双击恢复

### 下载数据

- 点击图表右上角 📥 图标
- 选择 CSV 或 JSON 格式

## 常用快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + F` | 搜索 |
| `Ctrl + R` | 刷新页面 |
| 鼠标滚轮 | 缩放图表 |
| 双击 | 重置缩放 |

## 当前训练应该关注的指标

对于你的 `harvest_milk` 训练：

### 必看指标 ⭐⭐⭐
```
rollout/ep_rew_mean    # 平均奖励（最重要！）
rollout/ep_len_mean    # Episode 长度
time/fps               # 训练速度
```

### 重要指标 ⭐⭐
```
train/loss             # 总损失
train/learning_rate    # 学习率
train/explained_variance # 价值函数质量
```

### 调试指标 ⭐
```
train/policy_gradient_loss  # 策略损失
train/value_loss           # 价值损失
train/approx_kl            # KL 散度
```

## 图表示例解读

### 健康的训练曲线

```
奖励 ↑
    |     ／￣￣
    |   ／
    |  ／
    | ／
    |／____________→ 步数
    
✅ 奖励稳定上升
```

### 需要调整的曲线

```
奖励 ↑
    | ＿＿＿＿＿＿
    |
    |____________→ 步数
    
⚠️ 奖励不增长 = 没学到东西
```

```
奖励 ↑
    |  ∧ ∧  ∧
    | ∨ ∨ ∨ ∨
    |____________→ 步数
    
⚠️ 波动太大 = 训练不稳定
```

## 实用技巧

### 1. 平滑曲线
- 在右侧设置中调整 **Smoothing** 滑块
- 推荐值: 0.6 - 0.8
- 可以消除噪声，看清趋势

### 2. 忽略早期数据
- 早期数据通常波动大
- 可以在图表上拖动选择后期数据

### 3. 对比不同实验
- 勾选多个 Run
- 可以对比不同超参数效果

### 4. 导出数据到 Excel
- 点击下载按钮
- 选择 CSV 格式
- 可以在 Excel 中进一步分析

## 故障排查

### 问题: 没有数据显示
- 检查左侧是否勾选了 Run
- 刷新浏览器 (Ctrl+R)
- 确认训练正在运行

### 问题: 数据不更新
- TensorBoard 每 5 秒自动刷新
- 可以手动点击右上角刷新按钮 🔄
- 或者重启 TensorBoard

### 问题: 找不到某个指标
- 使用顶部的搜索框
- 输入关键词如 "reward", "loss"

## 总结

虽然 TensorBoard 没有中文界面，但主要是看**图表趋势**，不需要太多文字理解：

**最简单的使用方式**:
1. 打开 TIME SERIES 标签
2. 看 `ep_rew_mean` 曲线是否上升 📈
3. 如果上升 = 训练有效 ✅
4. 如果不变 = 需要调整 ⚠️

就这么简单！

