# å¤šå›åˆå½•åˆ¶æŒ‡å—

> **åŠŸèƒ½**: åœ¨ä¸€æ¬¡è¿è¡Œä¸­è¿ç»­å½•åˆ¶å¤šä¸ªç æ ‘å›åˆï¼Œæ¯æ¬¡è·å¾—æœ¨å¤´åè‡ªåŠ¨ä¿å­˜å¹¶å¼€å§‹æ–°å›åˆ

---

## ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½**

### **è‡ªåŠ¨å›åˆç®¡ç†**

```
å›åˆ1: ç æ ‘ â†’ è·å¾—æœ¨å¤´ âœ“ â†’ è‡ªåŠ¨ä¿å­˜ â†’ Resetç¯å¢ƒ
å›åˆ2: ç æ ‘ â†’ è·å¾—æœ¨å¤´ âœ“ â†’ è‡ªåŠ¨ä¿å­˜ â†’ Resetç¯å¢ƒ
å›åˆ3: ç æ ‘ â†’ è·å¾—æœ¨å¤´ âœ“ â†’ è‡ªåŠ¨ä¿å­˜ â†’ Resetç¯å¢ƒ
...
å›åˆ10: ç æ ‘ â†’ è·å¾—æœ¨å¤´ âœ“ â†’ è‡ªåŠ¨ä¿å­˜ â†’ å®Œæˆ
```

**ä¼˜ç‚¹**:
- âœ… æ— éœ€åå¤å¯åŠ¨ç¨‹åº
- âœ… æ•°æ®è‡ªåŠ¨åˆ†ç±»å­˜å‚¨
- âœ… ç¯å¢ƒè‡ªåŠ¨éšæœºåŒ–ï¼ˆå¢åŠ æ•°æ®å¤šæ ·æ€§ï¼‰
- âœ… å®æ—¶æ˜¾ç¤ºè¿›åº¦å’Œç»Ÿè®¡

---

## ğŸš€ **å¿«é€Ÿå¼€å§‹**

### **åŸºç¡€ç”¨æ³•**

```bash
# é»˜è®¤å½•åˆ¶10ä¸ªå›åˆï¼Œæ¯å›åˆæœ€å¤š1000å¸§
python tools/record_manual_chopping.py

# è¾“å‡ºç»“æ„:
data/expert_demos/round_0/
â”œâ”€â”€ episode_000/
â”‚   â”œâ”€â”€ frame_00000.png
â”‚   â”œâ”€â”€ frame_00001.png
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ metadata.txt
â”œâ”€â”€ episode_001/
â”‚   â”œâ”€â”€ frame_00000.png
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ metadata.txt
â”œâ”€â”€ episode_002/
â”‚   â””â”€â”€ ...
â””â”€â”€ summary.txt  # å…¨å±€ç»Ÿè®¡
```

---

### **è‡ªå®šä¹‰å‚æ•°**

```bash
# å½•åˆ¶5ä¸ªå›åˆï¼Œæ¯å›åˆæœ€å¤š500å¸§
python tools/record_manual_chopping.py \
    --max-episodes 5 \
    --max-frames 500

# ä½¿ç”¨è‡ªå®šä¹‰è¾“å‡ºç›®å½•
python tools/record_manual_chopping.py \
    --output-dir data/my_demos \
    --max-episodes 10

# è°ƒæ•´ç›¸æœºçµæ•åº¦ï¼ˆæ›´ç²¾ç»†æ§åˆ¶ï¼‰
python tools/record_manual_chopping.py \
    --camera-delta 2 \
    --max-episodes 10
```

---

## ğŸ“‹ **å½•åˆ¶æµç¨‹**

### **ç¬¬1æ­¥: å¯åŠ¨ç¨‹åº**

```bash
python tools/record_manual_chopping.py --max-episodes 10
```

è¾“å‡º:
```
================================================================================
MineCLIP ç æ ‘åºåˆ—å½•åˆ¶å·¥å…·ï¼ˆå¤šå›åˆå½•åˆ¶ï¼‰
================================================================================

è¾“å‡ºç›®å½•: data/expert_demos/round_0
æ¯å›åˆæœ€å¤§å¸§æ•°: 1000
æœ€å¤§å›åˆæ•°: 10

[1/3] åˆ›å»ºMineDojoç¯å¢ƒ...
  ä»»åŠ¡: harvest_1_log_forest (æ£®æ—ä¸­ç æ ‘)
  âœ“ ç¯å¢ƒåˆ›å»ºæˆåŠŸ
  åŠ¨ä½œç©ºé—´: MultiDiscrete([3 3 4 25 25 8 244 36])

âš™ï¸  ç›¸æœºè®¾ç½®: delta=4 (çº¦60åº¦/æ¬¡)

[2/3] å¼€å§‹å¤šå›åˆå½•åˆ¶...

================================================================================
ğŸ¬ å¤šå›åˆå½•åˆ¶æ¨¡å¼
================================================================================
  è·å¾—æœ¨å¤´åè‡ªåŠ¨ä¿å­˜å½“å‰å›åˆï¼Œå¹¶å¼€å§‹ä¸‹ä¸€å›åˆ
  æŒ‰Qé”®å¯éšæ—¶åœæ­¢æ‰€æœ‰å½•åˆ¶
================================================================================

================================================================================
ğŸ® å›åˆ 1/10
================================================================================
  å¼€å§‹å½•åˆ¶å›åˆ 1...
  ç›®æ ‡: è·å¾—ä¸€ä¸ªæœ¨å¤´ï¼ˆæˆ–è¾¾åˆ°1000å¸§ï¼‰
```

---

### **ç¬¬2æ­¥: æ§åˆ¶è§’è‰²ç æ ‘**

**æ§åˆ¶æ–¹å¼ï¼ˆé”®ç›˜ç‰ˆï¼‰**:
- **W** - å‰è¿›
- **S** - åé€€
- **A** - å·¦ç§»
- **D** - å³ç§»
- **Space** - è·³è·ƒ
- **I** - è§†è§’å‘ä¸Š
- **K** - è§†è§’å‘ä¸‹
- **J** - è§†è§’å‘å·¦
- **L** - è§†è§’å‘å³
- **F** - æ”»å‡»/ç æ ‘
- **Q** - åœæ­¢æ‰€æœ‰å½•åˆ¶ï¼ˆç«‹å³ç»“æŸï¼‰
- **ESC** - ç´§æ€¥é€€å‡ºï¼ˆä¸ä¿å­˜å½“å‰å›åˆï¼‰

**å±å¹•æ˜¾ç¤º**:
```
Episode: 1/10
Frame: 156/1000
Reward: 0.000
Total: 2.345
Status: In Progress

Press Q to stop all recording
```

---

### **ç¬¬3æ­¥: è·å¾—æœ¨å¤´åè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€å›åˆ**

å½“ä½ ç æ ‘è·å¾—æœ¨å¤´æ—¶:

```
ğŸ‰ å›åˆ1: è·å¾—æœ¨å¤´ï¼å·²å½•åˆ¶ 234 å¸§

  ğŸ’¾ ä¿å­˜å›åˆ 1 æ•°æ®...
  âœ“ å›åˆ 1 å·²ä¿å­˜: 234 å¸§ -> data/expert_demos/round_0/episode_000

================================================================================
ğŸ® å›åˆ 2/10
================================================================================
  å¼€å§‹å½•åˆ¶å›åˆ 2...
  ç›®æ ‡: è·å¾—ä¸€ä¸ªæœ¨å¤´ï¼ˆæˆ–è¾¾åˆ°1000å¸§ï¼‰
```

**è‡ªåŠ¨æ“ä½œ**:
1. âœ… ä¿å­˜å½“å‰å›åˆæ‰€æœ‰å¸§
2. âœ… ä¿å­˜å½“å‰å›åˆå…ƒæ•°æ®
3. âœ… Resetç¯å¢ƒï¼ˆæ–°çš„éšæœºç§å­ï¼‰
4. âœ… å¼€å§‹ä¸‹ä¸€å›åˆå½•åˆ¶

---

### **ç¬¬4æ­¥: å®Œæˆæ‰€æœ‰å›åˆ**

å½•åˆ¶å®Œ10ä¸ªå›åˆå:

```
================================================================================
ğŸ“Š å½•åˆ¶å®Œæˆç»Ÿè®¡
================================================================================

æ€»å›åˆæ•°: 10
å®Œæˆä»»åŠ¡å›åˆ: 10/10
æ€»å¸§æ•°: 2456
å¹³å‡å¸§æ•°/å›åˆ: 245.6

å„å›åˆè¯¦æƒ…:
  å›åˆ 1: 234 å¸§, å¥–åŠ± 2.345, âœ“ å®Œæˆ
  å›åˆ 2: 198 å¸§, å¥–åŠ± 1.987, âœ“ å®Œæˆ
  å›åˆ 3: 267 å¸§, å¥–åŠ± 2.678, âœ“ å®Œæˆ
  å›åˆ 4: 221 å¸§, å¥–åŠ± 2.234, âœ“ å®Œæˆ
  å›åˆ 5: 189 å¸§, å¥–åŠ± 1.890, âœ“ å®Œæˆ
  å›åˆ 6: 254 å¸§, å¥–åŠ± 2.543, âœ“ å®Œæˆ
  å›åˆ 7: 211 å¸§, å¥–åŠ± 2.112, âœ“ å®Œæˆ
  å›åˆ 8: 276 å¸§, å¥–åŠ± 2.765, âœ“ å®Œæˆ
  å›åˆ 9: 303 å¸§, å¥–åŠ± 3.034, âœ“ å®Œæˆ
  å›åˆ 10: 303 å¸§, å¥–åŠ± 3.045, âœ“ å®Œæˆ

âœ“ æ‰€æœ‰æ•°æ®å·²ä¿å­˜åˆ°: data/expert_demos/round_0
âœ“ ç»Ÿè®¡ä¿¡æ¯å·²ä¿å­˜åˆ°: data/expert_demos/round_0/summary.txt

================================================================================
âœ… å¤šå›åˆå½•åˆ¶å®Œæˆï¼
================================================================================
```

---

## ğŸ“ **è¾“å‡ºæ–‡ä»¶ç»“æ„**

```
data/expert_demos/round_0/
â”œâ”€â”€ summary.txt              # å…¨å±€ç»Ÿè®¡ä¿¡æ¯
â”œâ”€â”€ episode_000/             # ç¬¬1å›åˆ
â”‚   â”œâ”€â”€ frame_00000.png      # ç¬¬1å¸§
â”‚   â”œâ”€â”€ frame_00001.png      # ç¬¬2å¸§
â”‚   â”œâ”€â”€ ...
â”‚   â”œâ”€â”€ frame_00233.png      # æœ€åä¸€å¸§
â”‚   â””â”€â”€ metadata.txt         # æœ¬å›åˆå…ƒæ•°æ®
â”œâ”€â”€ episode_001/             # ç¬¬2å›åˆ
â”‚   â”œâ”€â”€ frame_00000.png
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ metadata.txt
â”œâ”€â”€ episode_002/             # ç¬¬3å›åˆ
â”‚   â””â”€â”€ ...
...
â””â”€â”€ episode_009/             # ç¬¬10å›åˆ
    â””â”€â”€ ...
```

---

### **summary.txt å†…å®¹**

```
Total Episodes: 10
Completed Episodes: 10
Total Frames: 2456
Average Frames per Episode: 245.6
Camera Delta: 4
Recording Time: 2025-10-21 15:30:45

Episode Details:
  Episode 0: 234 frames, reward 2.345, completed=True
  Episode 1: 198 frames, reward 1.987, completed=True
  Episode 2: 267 frames, reward 2.678, completed=True
  ...
```

---

### **metadata.txt å†…å®¹ï¼ˆæ¯å›åˆï¼‰**

```
Episode: 0
Frames: 234
Total Reward: 2.345
Task Completed: True
```

---

## âš™ï¸ **å‚æ•°è¯´æ˜**

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--output-dir` | str | `data/expert_demos/round_0` | è¾“å‡ºç›®å½•è·¯å¾„ |
| `--max-frames` | int | `1000` | æ¯å›åˆæœ€å¤§å¸§æ•° |
| `--max-episodes` | int | `10` | æœ€å¤§å½•åˆ¶å›åˆæ•° |
| `--camera-delta` | int | `4` | ç›¸æœºè½¬åŠ¨å¢é‡ï¼ˆ1-12ï¼‰ |

---

### **camera-delta è¯´æ˜**

| å€¼ | è§’åº¦/æ¬¡ | ç”¨é€” |
|----|---------|------|
| 1 | ~15Â° | æœ€ç²¾ç»†æ§åˆ¶ |
| 2 | ~30Â° | ç²¾ç»†æ§åˆ¶ï¼ˆæ¨èæ–°æ‰‹ï¼‰ |
| 4 | ~60Â° | å¹³è¡¡ï¼ˆé»˜è®¤ï¼‰ |
| 6 | ~90Â° | å¿«é€Ÿè½¬å‘ |
| 8 | ~120Â° | æé€Ÿè½¬å‘ |
| 12 | ~180Â° | æœ€å¤§è§’åº¦ |

---

## ğŸ’¡ **ä½¿ç”¨æŠ€å·§**

### **1. æ•°æ®å¤šæ ·æ€§**

```bash
# å½•åˆ¶å¤šç»„æ•°æ®ï¼Œä½¿ç”¨ä¸åŒçš„roundç¼–å·
python tools/record_manual_chopping.py --output-dir data/expert_demos/round_0 --max-episodes 10
python tools/record_manual_chopping.py --output-dir data/expert_demos/round_1 --max-episodes 10
python tools/record_manual_chopping.py --output-dir data/expert_demos/round_2 --max-episodes 10

# æœ€ç»ˆè·å¾—30ä¸ªå›åˆçš„æ•°æ®
```

---

### **2. å¿«é€Ÿå½•åˆ¶ï¼ˆç†Ÿç»ƒç©å®¶ï¼‰**

```bash
# å‡å°‘æ¯å›åˆå¸§æ•°é™åˆ¶ï¼Œå¿«é€Ÿå®Œæˆ10ä¸ªå›åˆ
python tools/record_manual_chopping.py \
    --max-frames 500 \
    --max-episodes 10 \
    --camera-delta 6
```

---

### **3. é«˜è´¨é‡å½•åˆ¶ï¼ˆæ–°æ‰‹ï¼‰**

```bash
# å¢åŠ å¸§æ•°é™åˆ¶ï¼Œä½¿ç”¨ç²¾ç»†ç›¸æœºæ§åˆ¶
python tools/record_manual_chopping.py \
    --max-frames 2000 \
    --max-episodes 5 \
    --camera-delta 2
```

---

### **4. ä¸­é€”åœæ­¢**

å¦‚æœä½ æƒ³æå‰ç»“æŸï¼ˆä¾‹å¦‚å½•äº†5ä¸ªå›åˆåè§‰å¾—å¤Ÿäº†ï¼‰:

1. **æŒ‰Qé”®** - åœæ­¢æ‰€æœ‰å½•åˆ¶ï¼Œä¿å­˜å·²å®Œæˆçš„å›åˆ
2. ç¨‹åºä¼šè‡ªåŠ¨ä¿å­˜ç»Ÿè®¡ä¿¡æ¯å¹¶é€€å‡º

```
â¸ï¸  åœæ­¢æ‰€æœ‰å½•åˆ¶ï¼ˆç”¨æˆ·æŒ‰ä¸‹Qï¼‰

  ğŸ’¾ ä¿å­˜å›åˆ 5 æ•°æ®...
  âœ“ å›åˆ 5 å·²ä¿å­˜: 189 å¸§ -> data/expert_demos/round_0/episode_004

================================================================================
ğŸ“Š å½•åˆ¶å®Œæˆç»Ÿè®¡
================================================================================

æ€»å›åˆæ•°: 5  # åªå½•äº†5ä¸ªï¼Œæå‰åœæ­¢
å®Œæˆä»»åŠ¡å›åˆ: 5/5
...
```

---

## ğŸ” **éªŒè¯å½•åˆ¶æ•°æ®**

å½•åˆ¶å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨éªŒè¯è„šæœ¬åˆ†ææ•°æ®è´¨é‡:

```bash
# æ–¹æ³•1: åˆ†æå•ä¸ªå›åˆ
python tools/verify_mineclip_16frames.py \
    --sequence-dir data/expert_demos/round_0/episode_000

# æ–¹æ³•2: æ‰¹é‡åˆ†ææ‰€æœ‰å›åˆ
for ep in data/expert_demos/round_0/episode_*/; do
    echo "Analyzing $ep"
    python tools/verify_mineclip_16frames.py --sequence-dir "$ep"
done
```

---

## â“ **å¸¸è§é—®é¢˜**

### **Q1: å¦‚æœæˆ‘åœ¨æŸä¸ªå›åˆä¸­å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ**

**A**: ä¸¤ç§æƒ…å†µ:
1. **è¾¾åˆ°max_framesä½†æ²¡è·å¾—æœ¨å¤´**: è‡ªåŠ¨ä¿å­˜å½“å‰å›åˆï¼ˆæ ‡è®°ä¸ºæœªå®Œæˆï¼‰ï¼Œç„¶åå¼€å§‹ä¸‹ä¸€å›åˆ
2. **ä½ è§‰å¾—è¿™ä¸ªå›åˆè´¨é‡ä¸å¥½**: æŒ‰Qé”®åœæ­¢ï¼Œåˆ é™¤æœ€åä¸€ä¸ªepisodeç›®å½•ï¼Œé‡æ–°è¿è¡Œ

---

### **Q2: æ¯ä¸ªå›åˆçš„ç¯å¢ƒæ˜¯ä¸€æ ·çš„å—ï¼Ÿ**

**A**: ä¸ä¸€æ ·ï¼ç¯å¢ƒä½¿ç”¨`world_seed=None`ï¼ˆéšæœºç§å­ï¼‰ï¼Œæ¯æ¬¡resetå:
- âœ… å‡ºç”Ÿç‚¹ä¸åŒ
- âœ… æ ‘æœ¨ä½ç½®ä¸åŒ
- âœ… åœ°å½¢ç•¥æœ‰å·®å¼‚

è¿™å¢åŠ äº†æ•°æ®å¤šæ ·æ€§ï¼Œå¯¹è®­ç»ƒæœ‰åˆ© âœ…

---

### **Q3: å¯ä»¥è°ƒæ•´å½•åˆ¶å›åˆæ•°å—ï¼Ÿ**

**A**: å®Œå…¨å¯ä»¥ï¼

```bash
# åªå½•3ä¸ªå›åˆï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰
python tools/record_manual_chopping.py --max-episodes 3

# å½•20ä¸ªå›åˆï¼ˆå¤§è§„æ¨¡æ•°æ®æ”¶é›†ï¼‰
python tools/record_manual_chopping.py --max-episodes 20
```

---

### **Q4: å¦‚æœæŸä¸ªå›åˆå¡ä½äº†æ€ä¹ˆåŠï¼Ÿ**

**A**: å¦‚æœä½ åœ¨æŸä¸ªå›åˆä¸­æ‰¾ä¸åˆ°æ ‘æˆ–é‡åˆ°å…¶ä»–é—®é¢˜:
1. **æŒ‰Qé”®** - åœæ­¢æ‰€æœ‰å½•åˆ¶
2. ç¨‹åºä¼šä¿å­˜å½“å‰å·²å®Œæˆçš„å›åˆ
3. æœªå®Œæˆçš„å›åˆä¼šè¢«æ ‡è®°ä¸º`task_completed=False`

---

### **Q5: å¯ä»¥åŒæ—¶ä½¿ç”¨é¼ æ ‡å’Œé”®ç›˜å—ï¼Ÿ**

**A**: ä¸èƒ½ï¼Œç›®å‰æ˜¯ä¸¤ä¸ªç‹¬ç«‹å·¥å…·:
- `record_manual_chopping.py` - é”®ç›˜ç‰ˆ
- `record_manual_chopping_mouse.py` - é¼ æ ‡ç‰ˆï¼ˆæš‚ä¸æ”¯æŒå¤šå›åˆï¼‰

**å»ºè®®**: å¦‚æœä½ ç†Ÿæ‚‰é”®ç›˜æ§åˆ¶ï¼Œä½¿ç”¨é”®ç›˜ç‰ˆçš„å¤šå›åˆåŠŸèƒ½æ›´æ–¹ä¾¿ã€‚

---

## ğŸ¯ **DAggerè®­ç»ƒæµç¨‹**

å½•åˆ¶å®Œä¸“å®¶æ•°æ®åï¼Œå¯ä»¥ç”¨äºDAggerè®­ç»ƒ:

```bash
# ç¬¬0è½®: ä½¿ç”¨ä¸“å®¶æ•°æ®è®­ç»ƒåˆå§‹ç­–ç•¥
python src/training/train_bc.py \
    --data-dir data/expert_demos/round_0 \
    --output-model models/bc_round_0.zip

# ç¬¬1è½®: è¿è¡Œç­–ç•¥æ”¶é›†çŠ¶æ€
python tools/run_policy_collect_states.py \
    --policy models/bc_round_0.zip \
    --output-dir data/states_round_1 \
    --episodes 10

# ç¬¬1è½®: æ‰‹åŠ¨æ ‡æ³¨çŠ¶æ€
python tools/label_states.py \
    --states-dir data/states_round_1 \
    --output-dir data/expert_demos/round_1

# ç¬¬1è½®: åˆå¹¶æ•°æ®é‡æ–°è®­ç»ƒ
python src/training/train_bc.py \
    --data-dir data/expert_demos/round_0 data/expert_demos/round_1 \
    --output-model models/bc_round_1.zip

# é‡å¤...
```

---

## ğŸ“š **ç›¸å…³æ–‡æ¡£**

- [`CAMERA_CONTROL_FIX.md`](../issues/CAMERA_CONTROL_FIX.md) - ç›¸æœºæ§åˆ¶ä¿®å¤
- [`KEYBOARD_ROTATION_BUG_FIX.md`](../issues/KEYBOARD_ROTATION_BUG_FIX.md) - æ—‹è½¬bugä¿®å¤
- [`DAGGER_QUICK_START.md`](DAGGER_QUICK_START.md) - DAggerå¿«é€Ÿå¼€å§‹
- [`IMITATION_LEARNING_GUIDE.md`](IMITATION_LEARNING_GUIDE.md) - æ¨¡ä»¿å­¦ä¹ æŒ‡å—

---

**æœ€åæ›´æ–°**: 2025-10-21  
**çŠ¶æ€**: âœ… å·²å®ç°å¹¶æµ‹è¯•  
**æ¨èç”¨é€”**: DAggerä¸“å®¶æ•°æ®æ”¶é›†

