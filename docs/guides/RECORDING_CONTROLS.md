# 录制工具控制说明

> **最新更新**: 修复键盘控制，使用IJKL作为相机控制  
> **状态**: 可以正常使用 ✅

---

## 🎮 **键盘控制（已修复）**

### **移动控制**
- `W` - 前进 ✅
- `S` - 后退 ✅
- `A` - 左移 ✅
- `D` - 右移 ✅
- `Space` - 跳跃 ✅

### **相机控制（改用IJKL）**
- `I` - 向上看 ✅
- `K` - 向下看 ✅
- `J` - 向左看 ✅
- `L` - 向右看 ✅

> **为什么改用IJKL？**  
> OpenCV的方向键捕获不稳定，改用字母键更可靠

### **动作**
- `F` - 攻击/砍树 ⭐

### **系统**
- `Q` - 停止并保存 ✅
- `ESC` - 紧急退出（不保存）

---

## ⚡ **快速开始**

```bash
# 1. 激活环境
conda activate minedojo-x86

# 2. 运行录制（会自动清理旧数据）
python tools/record_manual_chopping.py --output-dir logs/my_chopping

# 3. 操作说明
# - 点击OpenCV窗口获得焦点
# - 使用WASD移动，IJKL转头
# - 按住F砍树
# - 完成后按Q保存
```

---

## 📝 **操作技巧**

### **找树**
1. 用`W`前进
2. 用`J`/`L`左右转头
3. 用`I`/`K`调整俯仰角

### **砍树**
1. 靠近树（`W`前进）
2. 调整视角对准树干（`IJKL`）
3. **按住`F`键**连续攻击
4. 看到"🎉 获得木头！"

### **完成**
按`Q`保存并退出

---

## 🔧 **修复说明**

### **v2.0 改进**
- ✅ 修复键盘控制逻辑
- ✅ 改用IJKL作为相机控制（更可靠）
- ✅ 修复图像格式转换
- ✅ 自动清理旧数据
- ✅ 改进按键响应

### **已知限制**
- 需要快速按键（每2帧重置一次动作状态）
- OpenCV窗口必须保持焦点
- macOS可能需要授予终端辅助功能权限

---

## 🎯 **预期行为**

- **按住W** → 角色持续前进
- **按住F** → 持续攻击/砍树
- **按IJKL** → 相机转动
- **画面显示** → 1024x640窗口，实时显示游戏画面

---

## ❓ **故障排除**

**Q: 按键没反应？**
- 确保点击了OpenCV窗口
- 尝试快速连续按键
- 检查终端是否有错误信息

**Q: 相机不动？**
- 使用IJKL，不是方向键
- 快速按键，不要长按

**Q: 攻击键不工作？**
- 使用`F`键，不是`J`
- 快速连续按`F`

---

**现在可以正常录制了！** 🎬

```bash
python tools/record_manual_chopping.py --output-dir logs/my_chopping
```

