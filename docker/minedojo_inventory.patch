--- minedojo/sim/sim.py.orig	2025-11-17 00:00:00.000000000 +0800
+++ minedojo/sim/sim.py	2025-11-17 00:00:00.000000000 +0800
@@ -236,6 +236,7 @@
             "use",
             "attack",
             "drop",
+            "inventory",
         ]
         action_handlers = [
             handlers.CameraAction(),
--- minedojo/sim/wrappers/ar_nn/nn_action_space_wrapper.py.orig	2025-11-17 00:00:00.000000000 +0800
+++ minedojo/sim/wrappers/ar_nn/nn_action_space_wrapper.py	2025-11-17 00:00:00.000000000 +0800
@@ -41,7 +41,7 @@
                 4,  # 0: noop, 1: jump, 2: sneak, 3: sprint
                 n_pitch_bins,  # camera pitch, 0: -180, n_pitch_bins - 1: +180
                 n_yaw_bins,  # camera yaw, 0: -180, n_yaw_bins - 1: +180,
-                8,  # functional actions, 0: no_op, 1: use, 2: drop, 3: attack 4: craft 5: equip 6: place 7: destroy
+                9,  # functional actions, 0: no_op, 1: use, 2: drop, 3: attack 4: craft 5: equip 6: place 7: destroy 8: inventory
                 len(MC.ALL_CRAFT_SMELT_ITEMS),  # arg for "craft"
                 MC.N_INV_SLOTS,  # arg for "equip", "place", and "destroy"
             ],
@@ -145,6 +145,9 @@
                     )
             else:
                 destroy_item = (True, action[7])
+        elif fn_action == 8:
+            # inventory action - added for STEVE-1 compatibility
+            noop["inventory"] = 1
         else:
             raise ValueError(f"Unknown value {fn_action} for function action")
         return noop, destroy_item
--- minedojo/sim/Malmo/Minecraft/src/main/java/com/microsoft/Malmo/Client/FakeMouse.java.orig	2025-11-17 00:00:00.000000000 +0800
+++ minedojo/sim/Malmo/Minecraft/src/main/java/com/microsoft/Malmo/Client/FakeMouse.java	2025-11-17 00:00:00.000000000 +0800
@@ -44,7 +44,7 @@
     private static boolean grabbed = false;
     private static boolean humanInput = true;
 
-    // private static FakeMouseCursor cursor = new FakeMouseCursor();
+    private static FakeMouseCursor cursor = new FakeMouseCursor();
 
 
     public static void setHumanInput(boolean humanInput) {
--- minedojo/sim/Malmo/Minecraft/src/main/java/com/microsoft/Malmo/MissionHandlers/CommandForKey.java.orig	2025-11-17 00:00:00.000000000 +0800
+++ minedojo/sim/Malmo/Minecraft/src/main/java/com/microsoft/Malmo/MissionHandlers/CommandForKey.java	2025-11-17 00:00:00.000000000 +0800
@@ -20,6 +20,8 @@
 package com.microsoft.Malmo.MissionHandlers;
 
 import java.lang.reflect.Field;
+import java.util.HashSet;
+import java.util.Set;
 
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.settings.GameSettings;
@@ -44,6 +46,34 @@
     public static final String DOWN_COMMAND_STRING = "1";
     public static final String UP_COMMAND_STRING = "0";
 
+    // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
+    // 状态驱动键盘控制（MCP-Reborn 风格）
+    // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
+
+    /**
+     * 直接设置 Minecraft KeyBinding 状态（绕过 FakeKeyboard）
+     * 
+     * @param keyBinding 要设置的 KeyBinding
+     * @param pressed true=按下，false=释放
+     */
+    private static void setKeyBindingStateDirect(KeyBinding keyBinding, boolean pressed) {
+        try {
+            int keyCode = keyBinding.getKeyCode();
+            // MC 1.11.2 使用 keyBinding.getKeyCode() 而不是 getKey()
+            // 直接调用 Minecraft 的 KeyBinding.setKeyBindState()
+            KeyBinding.setKeyBindState(keyCode, pressed);
+            
+            // 重要：模拟 MineRL，调用 onTick 来触发按键处理
+            if (pressed) {
+                KeyBinding.onTick(keyCode);
+            }
+        } catch (Exception e) {
+            System.err.println("[CommandForKey] Failed to set key state directly: " + e.getMessage());
+            e.printStackTrace();
+        }
+    }
+    
+
     public interface KeyEventListener
     {
         public void onKeyChange(String commandString, boolean pressed);
@@ -393,8 +423,23 @@
         // return (this.keyHook != null) ? this.keyHook.execute(verb, parameter) : false;
 
         if (verb != null && verb.equalsIgnoreCase(keyHook.getCommandString())) {
+            // 特殊处理：inventory 使用简单 Toggle（每次 inventory=1 触发一次按键）
+            if (verb.equals("inventory")) {
+                if (parameter != null && parameter.equalsIgnoreCase(DOWN_COMMAND_STRING)) {
+                    // inventory=1: 触发 Toggle（模拟按下 'E' 键）
+                    setKeyBindingStateDirect(keyHook, true);
+                    return true;
+                } else if (parameter != null && parameter.equalsIgnoreCase(UP_COMMAND_STRING)) {
+                    // inventory=0: 忽略
+                    return true;
+                } else {
+                    return false;
+                }
+            }
+            
+            // 其他命令：使用原始的 FakeKeyboard 事件驱动
             if (verb.equals("attack")) {
-                // imitate right mouse button click
+                // imitate left mouse button click
                 if (parameter != null && parameter.equalsIgnoreCase(DOWN_COMMAND_STRING)) {
                     FakeMouse.pressButton(0);
                 } else if (parameter != null && parameter.equalsIgnoreCase(UP_COMMAND_STRING)) {
@@ -411,13 +456,15 @@
                 } else {
                     return false;
                 }
-            } 
-            if (parameter != null && parameter.equalsIgnoreCase(DOWN_COMMAND_STRING)) {
-                FakeKeyboard.press(keyHook.getKeyCode());
-            } else if (parameter != null && parameter.equalsIgnoreCase(UP_COMMAND_STRING)) {
-                FakeKeyboard.release(keyHook.getKeyCode());
             } else {
-                return false;
+                // 其他按键命令
+                if (parameter != null && parameter.equalsIgnoreCase(DOWN_COMMAND_STRING)) {
+                    FakeKeyboard.press(keyHook.getKeyCode());
+                } else if (parameter != null && parameter.equalsIgnoreCase(UP_COMMAND_STRING)) {
+                    FakeKeyboard.release(keyHook.getKeyCode());
+                } else {
+                    return false;
+                }
             }
             return true;
         }
