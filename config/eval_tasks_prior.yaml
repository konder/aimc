# ==============================================================================
# Prior 模型评估 - 统一配置文件
# STEVE-1 Prior Model Evaluation - Unified Configuration
#
# 版本: v2.0
# 最后更新: 2025-12-01
# 说明: 包含所有任务定义、指令变体，无需额外JSON文件
# ==============================================================================

# ==============================================================================
# 全局配置 (Global Configuration)
# ==============================================================================
global:
  # 模型路径
  prior_weights: "data/weights/steve1/steve1_prior.pt"
  mineclip_config: "data/weights/mineclip"
  
  # 随机种子
  seed: 42
  
  # 输出配置
  output_dir: "results/prior_evaluation/official"
  
  # 报告生成
  report:
    generate_html: true
    generate_json: true
    generate_plots: true

# ==============================================================================
# 评估维度配置 (Evaluation Dimensions)
# ==============================================================================
evaluation_dimensions:
  
  # 维度1: 内在质量
  intrinsic_quality:
    enabled: true
    consistency:
      enabled: true
      n_samples: 10
    semantic_robustness:
      enabled: true
    output_diversity:
      enabled: true
    discriminability_preservation:
      enabled: true
  
  # 维度2: 输出质量
  output_quality:
    enabled: true
    goal_alignment:
      enabled: true
      use_reward_head: true
    prior_gain:
      enabled: true
    cross_modal_consistency:
      enabled: true
  
  # 维度3: 可控性（禁用）
  controllability:
    enabled: false

# ==============================================================================
# 任务集定义 (Task Sets)
# ==============================================================================
task_sets:
  
  # ---------------------------------------------------------------------------
  # 任务集1: Harvest 采集任务（只包含成功提取的6个）
  # ---------------------------------------------------------------------------
  harvest:
    name: "Harvest Tasks"
    description: "基础资源采集、植物采集、动物掉落物（只包含成功任务）"
    enabled: true
    tasks:
      # 基础资源采集（成功提取）
      - harvest_1_log          # 30.0% 成功率
      - harvest_1_dirt         # 90.0% 成功率
      - harvest_1_sand         # 100.0% 成功率
      - harvest_1_cobblestone  # 10.0% 成功率
      - harvest_1_coal         # 20.0% 成功率
      # - harvest_1_gravel     # 未成功，暂时注释
      # - harvest_1_clay       # 未成功，暂时注释
      # 植物采集（成功提取）
      # - harvest_1_flower     # 未成功，暂时注释
      - harvest_1_sapling      # 10.0% 成功率
      # - harvest_1_reeds      # 未成功，暂时注释
      # 动物掉落物（成功提取）
      # - harvest_1_milk       # 未成功，暂时注释
      - harvest_1_wool         # 50.0% 成功率
  
  # ---------------------------------------------------------------------------
  # 任务集2: Combat 战斗任务（只包含成功提取的1个）
  # ---------------------------------------------------------------------------
  combat:
    name: "Combat Tasks"
    description: "战斗类任务（只包含成功任务）"
    enabled: true
    tasks:
      # - combat_chicken              # 未成功，暂时注释
      - combat_pig                    # 20.0% 成功率
      # - combat_cow                  # 未成功，暂时注释
      # - combat_zombie_leather_armor # 未成功，暂时注释
      # - combat_zombie_with_shield   # 未成功，暂时注释
      # - combat_spider               # 未成功，暂时注释
      # - combat_skeleton             # 未成功，暂时注释
      # - combat_creeper              # 未成功，暂时注释
  
  # ---------------------------------------------------------------------------
  # 任务集3: Movement 移动任务（暂时禁用，无成功任务）
  # ---------------------------------------------------------------------------
  movement:
    name: "Movement Tasks"
    description: "移动和探索类任务（无成功任务，暂时禁用）"
    enabled: false
    tasks:
      # - explore     # 未成功，暂时注释
      # - look_sky    # 未成功，暂时注释
      # - underwater  # 未成功，暂时注释
      # - swim        # 未成功，暂时注释
  
  # ---------------------------------------------------------------------------
  # 任务集4: Techtree 科技树任务（只包含成功提取的2个）
  # ---------------------------------------------------------------------------
  techtree:
    name: "Techtree Tasks"
    description: "科技树任务（只包含成功任务）"
    enabled: true
    tasks:
      - techtree_craft_planks         # 80.0% 成功率
      - techtree_craft_crafting_table # 10.0% 成功率

# ==============================================================================
# 任务详细配置 (Task Definitions)
# ==============================================================================
tasks:
  
  # ==========================================================================
  # Harvest Tasks - 采集任务
  # ==========================================================================
  
  # --------------------------------------------------------------------------
  # harvest_1_log - 砍树获取木头
  # --------------------------------------------------------------------------
  harvest_1_log:
    instruction: "chop tree and get a log"
    instruction_variants:
      - "chop tree"
      - "chop tree and get wood"
      - "chop tree and get a log"
      - "cut down a tree to obtain a log"
      - "harvest wood from tree"
      - "chop tree then get one log"
    success_visuals_path: "data/success_visuals/harvest_1_log"
    metadata:
      category: "raw_resources"
      difficulty: "easy"
      env_name: "MineRLHarvestDefaultEnv-v0"
      description: "砍伐树木获取原木"
  
  # --------------------------------------------------------------------------
  # harvest_1_dirt - 挖掘泥土
  # --------------------------------------------------------------------------
  harvest_1_dirt:
    instruction: "dig dirt"
    instruction_variants:
      - "dig dirt"
      - "dig dirt block"
      - "dig and collect dirt"
      - "obtain dirt by digging"
      - "dig up some dirt"
    success_visuals_path: "data/success_visuals/harvest_1_dirt"
    metadata:
      category: "raw_resources"
      difficulty: "easy"
      env_name: "MineRLHarvestDefaultEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_sand - 挖掘沙子
  # --------------------------------------------------------------------------
  harvest_1_sand:
    instruction: "dig sand"
    instruction_variants:
      - "dig sand"
      - "dig sand block"
      - "collect sand"
      - "obtain sand by digging"
      - "dig up some sand"
    success_visuals_path: "data/success_visuals/harvest_1_sand"
    metadata:
      category: "raw_resources"
      difficulty: "easy"
      env_name: "MineRLHarvestDefaultEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_cobblestone - 采集圆石
  # --------------------------------------------------------------------------
  harvest_1_cobblestone:
    instruction: "mine cobblestone"
    instruction_variants:
      - "mine cobblestone"
      - "mine a cobblestone"
      - "dig stone to get cobblestone"
      - "obtain cobblestone by mining"
      - "mine and collect cobblestone"
    success_visuals_path: "data/success_visuals/harvest_1_cobblestone"
    metadata:
      category: "raw_resources"
      difficulty: "medium"
      env_name: "MineRLHarvestDefaultEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_coal - 采集煤炭
  # --------------------------------------------------------------------------
  harvest_1_coal:
    instruction: "mine coal"
    instruction_variants:
      - "mine coal ore"
      - "dig coal"
      - "obtain coal by mining"
      - "mine and collect coal"
    success_visuals_path: "data/success_visuals/harvest_1_coal"
    metadata:
      category: "raw_resources"
      difficulty: "medium"
      env_name: "MineRLHarvestDefaultEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_gravel - 挖掘沙砾（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # harvest_1_gravel:
  #   instruction: "dig gravel"
  #   instruction_variants:
  #     - "dig gravel block"
  #     - "collect gravel"
  #     - "obtain gravel by digging"
  #     - "dig up some gravel"
  #   success_visuals_path: "data/success_visuals/harvest_1_gravel"
  #   metadata:
  #     category: "raw_resources"
  #     difficulty: "easy"
  #     env_name: "MineRLHarvestDefaultEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_clay - 挖掘粘土（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # harvest_1_clay:
  #   instruction: "dig clay"
  #   instruction_variants:
  #     - "dig clay block"
  #     - "collect clay"
  #     - "obtain clay by digging"
  #     - "dig up some clay"
  #   success_visuals_path: "data/success_visuals/harvest_1_clay"
  #   metadata:
  #     category: "special_blocks"
  #     difficulty: "medium"
  #     env_name: "MineRLHarvestDefaultEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_flower - 采集花朵（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # harvest_1_flower:
  #   instruction: "pick flower"
  #   instruction_variants:
  #     - "pick a flower"
  #     - "collect flower"
  #     - "gather flower"
  #     - "get a flower"
  #   success_visuals_path: "data/success_visuals/harvest_1_flower"
  #   metadata:
  #     category: "plants"
  #     difficulty: "easy"
  #     env_name: "MineRLHarvestEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_sapling - 获取树苗
  # --------------------------------------------------------------------------
  harvest_1_sapling:
    instruction: "get sapling from tree"
    instruction_variants:
      - "get sapling"
      - "collect sapling from leaves"
      - "obtain sapling from tree"
      - "break leaves to get sapling"
    success_visuals_path: "data/success_visuals/harvest_1_sapling"
    metadata:
      category: "plants"
      difficulty: "easy"
      env_name: "MineRLHarvestEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_reeds - 收获甘蔗（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # harvest_1_reeds:
  #   instruction: "harvest sugar cane"
  #   instruction_variants:
  #     - "get sugar cane"
  #     - "collect sugar cane"
  #     - "harvest reeds"
  #     - "get reeds"
  #   success_visuals_path: "data/success_visuals/harvest_1_reeds"
  #   metadata:
  #     category: "crops"
  #     difficulty: "medium"
  #     env_name: "MineRLHarvestEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_milk - 获取牛奶（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # harvest_1_milk:
  #   instruction: "milk cow"
  #   instruction_variants:
  #     - "get milk from cow"
  #     - "milk a cow"
  #     - "obtain milk bucket"
  #     - "use bucket on cow"
  #   success_visuals_path: "data/success_visuals/harvest_1_milk"
  #   metadata:
  #     category: "raw_resources"
  #     difficulty: "easy"
  #     env_name: "MineRLHarvestDefaultEnv-v0"
  
  # --------------------------------------------------------------------------
  # harvest_1_wool - 获取羊毛
  # --------------------------------------------------------------------------
  harvest_1_wool:
    instruction: "get wool from sheep"
    instruction_variants:
      - "shear sheep"
      - "shear sheep to get wool"
      - "obtain wool from sheep"
      - "collect wool by shearing sheep"
      - "shear a sheep and get wool"
    success_visuals_path: "data/success_visuals/harvest_1_wool"
    metadata:
      category: "animal_drops"
      difficulty: "medium"
      env_name: "MineRLHarvestEnv-v0"
  
  # ==========================================================================
  # Combat Tasks - 战斗任务
  # ==========================================================================
  
  # --------------------------------------------------------------------------
  # combat_pig - 击杀猪
  # --------------------------------------------------------------------------
  combat_pig:
    instruction: "hunt pig"
    instruction_variants:
      - "hunt pig"
      - "kill a pig"
      - "hunt and kill pig"
      - "attack pig"
      - "defeat a pig"
    success_visuals_path: "data/success_visuals/combat_pig"
    metadata:
      category: "combat"
      difficulty: "easy"
  
  # --------------------------------------------------------------------------
  # combat_cow - 击杀牛（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # combat_cow:
  #   instruction: "hunt cow"
  #   instruction_variants:
  #     - "hunt cow"
  #     - "kill a cow"
  #     - "hunt and kill cow"
  #     - "attack cow"
  #     - "defeat a cow"
  #   success_visuals_path: "data/success_visuals/combat_cow"
  #   metadata:
  #     category: "combat"
  #     difficulty: "easy"
  
  # --------------------------------------------------------------------------
  # combat_chicken - 击杀鸡（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # combat_chicken:
  #   instruction: "hunt chicken"
  #   instruction_variants:
  #     - "hunt chicken"
  #     - "kill a chicken"
  #     - "hunt and kill chicken"
  #     - "attack chicken"
  #     - "defeat a chicken"
  #   success_visuals_path: "data/success_visuals/combat_chicken"
  #   metadata:
  #     category: "combat"
  #     difficulty: "easy"
  
  # ==========================================================================
  # Movement Tasks - 移动任务（未成功，全部暂时注释）
  # ==========================================================================
  
  # --------------------------------------------------------------------------
  # explore - 探索（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # explore:
  #   instruction: "go explore"
  #   instruction_variants:
  #     - "explore"
  #     - "go exploring"
  #     - "explore the area"
  #     - "wander around"
  #   success_visuals_path: "data/success_visuals/explore"
  #   metadata:
  #     category: "movement"
  #     difficulty: "easy"
  
  # --------------------------------------------------------------------------
  # look_sky - 看天空（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # look_sky:
  #   instruction: "look at the sky"
  #   instruction_variants:
  #     - "look up at sky"
  #     - "watch the sky"
  #     - "gaze at sky"
  #   success_visuals_path: "data/success_visuals/look_sky"
  #   metadata:
  #     category: "movement"
  #     difficulty: "easy"
  
  # --------------------------------------------------------------------------
  # underwater - 水下活动（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # underwater:
  #   instruction: "go underwater"
  #   instruction_variants:
  #     - "swim underwater"
  #     - "dive underwater"
  #     - "go under water"
  #   success_visuals_path: "data/success_visuals/underwater"
  #   metadata:
  #     category: "movement"
  #     difficulty: "easy"
  
  # --------------------------------------------------------------------------
  # swim - 游泳（未成功，暂时注释）
  # --------------------------------------------------------------------------
  # swim:
  #   instruction: "swim"
  #   instruction_variants:
  #     - "swim in water"
  #     - "go swimming"
  #     - "swim around"
  #   success_visuals_path: "data/success_visuals/swim"
  #   metadata:
  #     category: "movement"
  #     difficulty: "easy"
  
  # ==========================================================================
  # Techtree Tasks - 科技树任务
  # ==========================================================================
  
  # --------------------------------------------------------------------------
  # techtree_craft_planks - 制作木板
  # --------------------------------------------------------------------------
  techtree_craft_planks:
    instruction: "craft wooden planks"
    instruction_variants:
      - "craft planks"
      - "make wooden planks"
      - "create planks from logs"
      - "craft wood planks"
    success_visuals_path: "data/success_visuals/techtree_craft_planks"
    metadata:
      category: "techtree"
      difficulty: "easy"
      env_name: "MineRLTreechopEnv-v0"
      description: "制作木板（基础科技树）"
  
  # --------------------------------------------------------------------------
  # techtree_craft_crafting_table - 制作工作台
  # --------------------------------------------------------------------------
  techtree_craft_crafting_table:
    instruction: "craft crafting table"
    instruction_variants:
      - "make crafting table"
      - "create crafting table"
      - "craft a crafting table"
      - "build crafting table"
    success_visuals_path: "data/success_visuals/techtree_craft_crafting_table"
    metadata:
      category: "techtree"
      difficulty: "easy"
      env_name: "MineRLTreechopEnv-v0"
      description: "制作工作台（基础科技树）"

# ==============================================================================
# 阈值配置 (Thresholds)
# ==============================================================================
thresholds:
  consistency:
    excellent: 0.95
    good: 0.85
    poor: 0.85
  semantic_robustness:
    excellent: 0.90
    good: 0.70
    poor: 0.70
  output_diversity:
    excellent: 0.0001
    poor: 0.0001
  discriminability:
    excellent: 1.0
    good: 0.5
    poor: 0.5
  goal_alignment:
    excellent: 0.60
    good: 0.40
    poor: 0.40
  prior_gain:
    excellent: 0.05
    good: 0.0
    poor: 0.0

# ==============================================================================
# 使用说明
# ==============================================================================
#
# 当前配置：只包含10个成功提取视觉嵌入的任务
#   - harvest: 6个任务 (sand, dirt, log, cobblestone, coal, sapling, wool)
#   - combat: 1个任务 (pig)
#   - techtree: 2个任务 (craft_planks, craft_crafting_table)
#
# 快速开始（所有启用的任务集）:
#   python src/evaluation/prior_eval_framework.py --config config/eval_tasks_prior.yaml
#
# 指定任务集:
#   python src/evaluation/prior_eval_framework.py \
#       --config config/eval_tasks_prior.yaml \
#       --task-set harvest
#
# 指定多个任务集:
#   python src/evaluation/prior_eval_framework.py \
#       --config config/eval_tasks_prior.yaml \
#       --task-set harvest,combat,techtree
#
# 查看结果:
#   open results/prior_evaluation/official/prior_evaluation_report.html
#
# 注意：其他未成功的任务已临时注释，待成功录制后可取消注释
# ==============================================================================
